{"version":3,"sources":["/Users/Marko/Documents/FullStack-Junior/ticketSellingDApp/Components/SingleTicket.js"],"names":["SingleTicket","props","state","concert","price","loading","error","deleted","loadInfo","bind","buyTicket","ticket","Tickets","address","methods","concertInfo","call","ticketInfo","info","split","ticketPrice","console","log","setState","evt","preventDefault","web3","eth","getAccounts","accounts","send","from","value","message"],"mappings":"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","file":"4.028e814ef70d9c3a0d60.hot-update.js","sourcesContent":["import React, {Component} from 'react'\nimport Tickets from '../Ethereum/ticket'\nimport web3 from '../Ethereum/web3'\n\n\nclass SingleTicket extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      concert: [],\n      price: '',\n      loading: true,\n      error: '',\n      deleted: false\n    }\n    this.loadInfo = this.loadInfo.bind(this)\n    this.buyTicket = this.buyTicket.bind(this)\n  }\n\n  async componentDidMount() {\n    try {\n      const ticket = Tickets(this.props.address)\n      const ticketInfo = await ticket.methods.concertInfo().call()\n      const info = ticketInfo.split('/')\n      const ticketPrice = await ticket.methods.ticketPrice().call()\n      this.loadInfo(info, ticketPrice)\n    } catch (err) {\n      console.log(err)\n      this.setState({deleted: true})\n    }\n  }\n\n  loadInfo(info, price) {\n    this.setState({concert: info})\n    this.setState({price: '' + price})\n  }\n\n  async buyTicket(evt) {\n    evt.preventDefault()\n    const ticket = Tickets(this.props.address)\n    this.setState({loading: true})\n\n    try {\n      const accounts = await web3.eth.getAccounts();\n      await ticket.methods.buyTicket().send({\n        from: accounts[0],\n        value: this.state.price\n      });\n    } catch (err) {\n      this.setState({ error: err.message });\n    }\n\n    this.setState({ loading: false});\n  }\n\n  render(){\n\n    return (\n      this.state.deleted ? null :\n      <div>\n        <div className=\"ticket\">\n          <div className=\"ticketHeader\">\n            <h1>{this.state.concert[0]}</h1>\n            <h2>{this.state.price + ' wei'}</h2>\n          </div>\n          <div className=\"ticketmeta\">\n            <h4>{'Starts at ' + this.state.concert[1]}</h4>\n            <h5>{this.state.concert[2] + ' in '}{this.state.concert[3]}</h5>\n          </div>\n          <div>\n            <button className=\"ticketButton\" type=\"submit\" onClick={this.buyTicket}>Buy</button>\n          </div>\n          {\n            !this.state.loading ? null :\n            (\n              <div className=\"loading\">\n                <h4>This takes 15-30 Seonds, please wait!</h4>\n              </div>\n            )\n          }\n          {\n            this.state.error === '' ? null :\n            <div className=\"error\">\n              <h4>Error! {this.state.error}</h4>\n            </div>\n          }\n        </div>\n      </div>\n\n    )\n  }\n}\n\nexport default SingleTicket\n\n\n\n// WEBPACK FOOTER //\n// ./Components/SingleTicket.js"],"sourceRoot":""}